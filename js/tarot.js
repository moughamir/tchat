function initBuyFormulaModal(t,e){$(document).on("opened.fndtn.reveal",t,function(){var t=$(this);t.off("submit").on("submit","form",function(){var n=$(this);return n.find('input[type="submit"]').attr("disabled",!0),$.post(this.action,$(this).serialize()).done(function(i){i.status?"OK"==i.status?(t.foundation("reveal","close"),$.isFunction(e)&&e(i)):(n.find('input[type="submit"]').attr("disabled",!1),$("#buyFormulaErrorModal").remove(),$('<div class="reveal-modal error tiny" id="buyFormulaErrorModal" data-reveal role="dialog"><div class="content">'+i.message+'<a class="close-reveal-modal" aria-label="Close">&#215;</a></div></div>').appendTo("body").foundation("reveal","open",{multiple_opened:!0}).on("closed.fndtn.reveal",function(){t.hasClass("toback")&&t.removeClass("toback")})):t.html(i)}),!1}).on("change",'input[name="buyFormula[alias]"]',function(){""==this.value&&$(this).closest(".row.creditCard.alias").hide().siblings(".row.creditCard.new").show().find(":input").attr("disabled",!1)}).on("click",".creditCardChoose",function(){var t=$(this).closest(".row.creditCard.new").hide();t.prev(".row.creditCard.alias").show().find('input[name="buyFormula[alias]"]').first().trigger("click"),t.find(":input").attr("disabled",!0)});var n=t.find(".row.creditCard.new");n.is(":visible")||n.find(":input").attr("disabled",!0)})}function sanitizeUrl(t){var e=document.createElement("div");return e.innerHTML=t,t=e.textContent,e.textContent="",t}function DynamicForm(t){var e={container_id:null,translation:{element_num:"Element nÂ°"},wrapper_fabric_id:"dynamic_form_wrapper",wrapper_fabric_class:"dynamic_form_wrapper",remove_element_content:'<i class="fi-minus"></i>',add_element_content:'<i class="fi-plus"></i>',hide:!1,children_selector:"div",append_add_button:!0,append_label_index:!0};e=$.extend({},e,t),this.container_id=(null!==e.container_id&&"#"===e.container_id.charAt(0)?"":"#")+e.container_id,this.translation=e.translation,this.wrapper_fabric_id=e.wrapper_fabric_id,this.wrapper_fabric_class=e.wrapper_fabric_class,this.remove_element_content=e.remove_element_content,this.add_element_content=e.add_element_content,this.hide=e.hide,this.children_selector=e.children_selector,this.append_label_index=e.append_label_index;var n=$(this.container_id);if(0==n.length)return null;this.index=n.children(this.children_selector).length,this.element_prototype=n.data("prototype");var i=this;if(e.append_add_button){var a=$('<button type="button" class="btn add_element">'+i.add_element_content+"</button>");a.click(function(t){i.add()}),n.prepend(a)}n.children(this.children_selector).each(function(t,e){var n=$(this),a=n.children("label"),s=i.handlingNumberValue(a.html());n.wrap('<div id="'+i.wrapper_fabric_id+"-"+s+'" class="'+i.wrapper_fabric_class+'"></div>'),i.setLabel(a)}),this.hide&&n.parent().hide()}!function(t,e,n,i){"use strict";function a(t){return("string"==typeof t||t instanceof String)&&(t=t.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),t}function s(t){this.selector=t,this.query=""}var o=function(e){var n=t("head");n.prepend(t.map(e,function(t){return 0===n.has("."+t).length?'<meta class="'+t+'" />':void 0}))};o(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),t(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof n.body&&FastClick.attach(n.body)});var r=function(e,i){if("string"==typeof e){if(i){var a;if(i.jquery){if(a=i[0],!a)return i}else a=i;return t(a.querySelectorAll(e))}return t(n.querySelectorAll(e))}return t(e,i)},l=function(t){var e=[];return t||e.push("data"),this.namespace.length>0&&e.push(this.namespace),e.push(this.name),e.join("-")},c=function(t){for(var e=t.split("-"),n=e.length,i=[];n--;)0!==n?i.push(e[n]):this.namespace.length>0?i.push(this.namespace,e[n]):i.push(e[n]);return i.reverse().join("-")},d=function(e,n){var i=this,a=function(){var a=r(this),s=!a.data(i.attr_name(!0)+"-init");a.data(i.attr_name(!0)+"-init",t.extend({},i.settings,n||e,i.data_options(a))),s&&i.events(this)};return r(this.scope).is("["+this.attr_name()+"]")?a.call(this.scope):r("["+this.attr_name()+"]",this.scope).each(a),"string"==typeof e?this[e].call(this,n):void 0},h=function(t,e){function n(){e(t[0])}function i(){if(this.one("load",n),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?void(t[0].complete||4===t[0].readyState?n():i.call(t)):void n()};e.matchMedia||(e.matchMedia=function(){var t=e.styleMedia||e.media;if(!t){var i=n.createElement("style"),a=n.getElementsByTagName("script")[0],s=null;i.type="text/css",i.id="matchmediajs-test",a.parentNode.insertBefore(i,a),s="getComputedStyle"in e&&e.getComputedStyle(i,null)||i.currentStyle,t={matchMedium:function(t){var e="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return i.styleSheet?i.styleSheet.cssText=e:i.textContent=e,"1px"===s.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),function(t){function n(){i&&(o(n),l&&t.fx.tick())}for(var i,a=0,s=["webkit","moz"],o=e.requestAnimationFrame,r=e.cancelAnimationFrame,l="undefined"!=typeof t.fx;a<s.length&&!o;a++)o=e[s[a]+"RequestAnimationFrame"],r=r||e[s[a]+"CancelAnimationFrame"]||e[s[a]+"CancelRequestAnimationFrame"];o?(e.requestAnimationFrame=o,e.cancelAnimationFrame=r,l&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!i&&(i=!0,n())},t.fx.stop=function(){i=!1})):(e.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-a)),s=e.setTimeout(function(){t(n+i)},i);return a=n+i,s},e.cancelAnimationFrame=function(t){clearTimeout(t)})}(t),s.prototype.toString=function(){return this.query||(this.query=r(this.selector).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""))},e.Foundation={name:"Foundation",version:"5.5.3",media_queries:{small:new s(".foundation-mq-small"),"small-only":new s(".foundation-mq-small-only"),medium:new s(".foundation-mq-medium"),"medium-only":new s(".foundation-mq-medium-only"),large:new s(".foundation-mq-large"),"large-only":new s(".foundation-mq-large-only"),xlarge:new s(".foundation-mq-xlarge"),"xlarge-only":new s(".foundation-mq-xlarge-only"),xxlarge:new s(".foundation-mq-xxlarge")},stylesheet:t("<style></style>").appendTo("head")[0].sheet,global:{namespace:i},init:function(t,n,i,a,s){var o=[t,i,a,s],l=[];if(this.rtl=/rtl/i.test(r("html").attr("dir")),this.scope=t||this.scope,this.set_namespace(),n&&"string"==typeof n&&!/reflow/i.test(n))this.libs.hasOwnProperty(n)&&l.push(this.init_lib(n,o));else for(var c in this.libs)l.push(this.init_lib(c,n));return r(e).load(function(){r(e).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),t},init_lib:function(e,n){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),n&&n.hasOwnProperty(e)?("undefined"!=typeof this.libs[e].settings?t.extend(!0,this.libs[e].settings,n[e]):"undefined"!=typeof this.libs[e].defaults&&t.extend(!0,this.libs[e].defaults,n[e]),this.libs[e].init.apply(this.libs[e],[this.scope,n[e]])):(n=n instanceof Array?n:new Array(n),this.libs[e].init.apply(this.libs[e],n))):function(){}},patch:function(t){t.scope=this.scope,t.namespace=this.global.namespace,t.rtl=this.rtl,t.data_options=this.utils.data_options,t.attr_name=l,t.add_namespace=c,t.bindings=d,t.S=this.utils.S},inherit:function(t,e){for(var n=e.split(" "),i=n.length;i--;)this.utils.hasOwnProperty(n[i])&&(t[n[i]]=this.utils[n[i]])},set_namespace:function(){var e=this.global.namespace===i?t(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===i||/false/i.test(e)?"":e},libs:{},utils:{S:r,throttle:function(t,e){var n=null;return function(){var i=this,a=arguments;null==n&&(n=setTimeout(function(){t.apply(i,a),n=null},e))}},debounce:function(t,e,n){var i,a;return function(){var s=this,o=arguments,r=function(){i=null,n||(a=t.apply(s,o))},l=n&&!i;return clearTimeout(i),i=setTimeout(r,e),l&&(a=t.apply(s,o)),a}},data_options:function(e,n){function i(t){return!isNaN(t-0)&&null!==t&&""!==t&&t!==!1&&t!==!0}function a(e){return"string"==typeof e?t.trim(e):e}n=n||"options";var s,o,r,l={},c=function(t){var e=Foundation.global.namespace;return e.length>0?t.data(e+"-"+n):t.data(n)},d=c(e);if("object"==typeof d)return d;for(r=(d||":").split(";"),s=r.length;s--;)o=r[s].split(":"),o=[o[0],o.slice(1).join(":")],/true/i.test(o[1])&&(o[1]=!0),/false/i.test(o[1])&&(o[1]=!1),i(o[1])&&(-1===o[1].indexOf(".")?o[1]=parseInt(o[1],10):o[1]=parseFloat(o[1])),2===o.length&&o[0].length>0&&(l[a(o[0])]=a(o[1]));return l},register_media:function(e,n){Foundation.media_queries[e]===i&&(t("head").append('<meta class="'+n+'"/>'),Foundation.media_queries[e]=a(t("."+n).css("font-family")))},add_custom_rule:function(t,e){if(e===i&&Foundation.stylesheet)Foundation.stylesheet.insertRule(t,Foundation.stylesheet.cssRules.length);else{var n=Foundation.media_queries[e];n!==i&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[e]+"{ "+t+" }",Foundation.stylesheet.cssRules.length)}},image_loaded:function(t,e){function n(t){for(var e=t.length,n=e-1;n>=0;n--)if(t.attr("height")===i)return!1;return!0}var a=this,s=t.length;(0===s||n(t))&&e(t),t.each(function(){h(a.S(this),function(){s-=1,0===s&&e(t)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(t){return e.matchMedia(t).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},t.fn.foundation=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(t)),this})}}(jQuery,window,window.document),function(t,e,n,i){"use strict";Foundation.libs.alert={name:"alert",version:"5.5.3",settings:{callback:function(){}},init:function(t,e,n){this.bindings(e,n)},events:function(){var e=this,n=this.S;t(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] .close",function(t){var i=n(this).closest("["+e.attr_name()+"]"),a=i.data(e.attr_name(!0)+"-init")||e.settings;t.preventDefault(),Modernizr.csstransitions?(i.addClass("alert-close"),i.on("transitionend webkitTransitionEnd oTransitionEnd",function(t){n(this).trigger("close.fndtn.alert").remove(),a.callback()})):i.fadeOut(300,function(){n(this).trigger("close.fndtn.alert").remove(),a.callback()})})},reflow:function(){}}}(jQuery,window,window.document),function(t,e,n,i){"use strict";Foundation.libs.equalizer={name:"equalizer",version:"5.5.3",settings:{use_tallest:!0,before_height_change:t.noop,after_height_change:t.noop,equalize_on_stack:!1,act_on_hidden_el:!1},init:function(t,e,n){Foundation.inherit(this,"image_loaded"),this.bindings(e,n),this.reflow()},events:function(){this.S(e).off(".equalizer").on("resize.fndtn.equalizer",function(t){this.reflow()}.bind(this))},equalize:function(e){var n,i,a=!1,s=e.data("equalizer"),o=e.data(this.attr_name(!0)+"-init")||this.settings;if(n=o.act_on_hidden_el?s?e.find("["+this.attr_name()+'-watch="'+s+'"]'):e.find("["+this.attr_name()+"-watch]"):s?e.find("["+this.attr_name()+'-watch="'+s+'"]:visible'):e.find("["+this.attr_name()+"-watch]:visible"),0!==n.length&&(o.before_height_change(),e.trigger("before-height-change.fndth.equalizer"),n.height("inherit"),o.equalize_on_stack!==!1||(i=n.first().offset().top,n.each(function(){return t(this).offset().top!==i?(a=!0,!1):void 0}),!a))){var r=n.map(function(){return t(this).outerHeight(!1)}).get();if(o.use_tallest){var l=Math.max.apply(null,r);n.css("height",l)}else{var c=Math.min.apply(null,r);n.css("height",c)}o.after_height_change(),e.trigger("after-height-change.fndtn.equalizer")}},reflow:function(){var e=this;this.S("["+this.attr_name()+"]",this.scope).each(function(){var n=t(this),i=n.data("equalizer-mq"),a=!0;i&&(i="is_"+i.replace(/-/g,"_"),Foundation.utils.hasOwnProperty(i)&&(a=!1)),e.image_loaded(e.S("img",this),function(){if(a||Foundation.utils[i]())e.equalize(n);else{var t=n.find("["+e.attr_name()+"-watch]:visible");t.css("height","auto")}})})}}}(jQuery,window,window.document),function(t,e,n,i){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.5.3",settings:{index:0,start_offset:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",mobile_show_parent_link:!0,is_hover:!0,scrolltop:!0,sticky_on:"all",dropdown_autoclose:!0},init:function(e,n,i){Foundation.inherit(this,"add_custom_rule register_media throttle");var a=this;a.register_media("topbar","foundation-mq-topbar"),this.bindings(n,i),a.S("["+this.attr_name()+"]",this.scope).each(function(){var e=t(this),n=e.data(a.attr_name(!0)+"-init");a.S("section, .top-bar-section",this);e.data("index",0);var i=e.parent();i.hasClass("fixed")||a.is_sticky(e,i,n)?(a.settings.sticky_class=n.sticky_class,a.settings.sticky_topbar=e,e.data("height",i.outerHeight()),e.data("stickyoffset",i.offset().top)):e.data("height",e.outerHeight()),n.assembled||a.assemble(e),n.is_hover?a.S(".has-dropdown",e).addClass("not-click"):a.S(".has-dropdown",e).removeClass("not-click"),a.add_custom_rule(".f-topbar-fixed { padding-top: "+e.data("height")+"px }"),i.hasClass("fixed")&&a.S("body").addClass("f-topbar-fixed")})},is_sticky:function(t,e,n){var i=e.hasClass(n.sticky_class),a=matchMedia(Foundation.media_queries.small).matches,s=matchMedia(Foundation.media_queries.medium).matches,o=matchMedia(Foundation.media_queries.large).matches;return i&&"all"===n.sticky_on?!0:i&&this.small()&&-1!==n.sticky_on.indexOf("small")&&a&&!s&&!o?!0:i&&this.medium()&&-1!==n.sticky_on.indexOf("medium")&&a&&s&&!o?!0:i&&this.large()&&-1!==n.sticky_on.indexOf("large")&&a&&s&&o?!0:!1},toggle:function(n){var i,a=this;i=n?a.S(n).closest("["+this.attr_name()+"]"):a.S("["+this.attr_name()+"]");var s=i.data(this.attr_name(!0)+"-init"),o=a.S("section, .top-bar-section",i);a.breakpoint()&&(a.rtl?(o.css({right:"0%"}),t(">.name",o).css({right:"100%"})):(o.css({left:"0%"}),t(">.name",o).css({left:"100%"})),a.S("li.moved",o).removeClass("moved"),i.data("index",0),i.toggleClass("expanded").css("height","")),s.scrolltop?i.hasClass("expanded")?i.parent().hasClass("fixed")&&(s.scrolltop?(i.parent().removeClass("fixed"),i.addClass("fixed"),a.S("body").removeClass("f-topbar-fixed"),e.scrollTo(0,0)):i.parent().removeClass("expanded")):i.hasClass("fixed")&&(i.parent().addClass("fixed"),i.removeClass("fixed"),a.S("body").addClass("f-topbar-fixed")):(a.is_sticky(i,i.parent(),s)&&i.parent().addClass("fixed"),i.parent().hasClass("fixed")&&(i.hasClass("expanded")?(i.addClass("fixed"),i.parent().addClass("expanded"),a.S("body").addClass("f-topbar-fixed")):(i.removeClass("fixed"),i.parent().removeClass("expanded"),a.update_sticky_positioning())))},timer:null,events:function(n){var i=this,a=this.S;a(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(t){t.preventDefault(),i.toggle(this)}).on("click.fndtn.topbar contextmenu.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(e){var n=t(this).closest("li"),a=n.closest("["+i.attr_name()+"]"),s=a.data(i.attr_name(!0)+"-init");if(s.dropdown_autoclose&&s.is_hover){var o=t(this).closest(".hover");o.removeClass("hover")}!i.breakpoint()||n.hasClass("back")||n.hasClass("has-dropdown")||i.toggle()}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(e){var n=a(this),s=a(e.target),o=n.closest("["+i.attr_name()+"]"),r=o.data(i.attr_name(!0)+"-init");return s.data("revealId")?void i.toggle():void(i.breakpoint()||(!r.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),n.hasClass("hover")?(n.removeClass("hover").find("li").removeClass("hover"),n.parents("li.hover").removeClass("hover")):(n.addClass("hover"),t(n).siblings().removeClass("hover"),"A"===s[0].nodeName&&s.parent().hasClass("has-dropdown")&&e.preventDefault())))}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(t){if(i.breakpoint()){t.preventDefault();var e=a(this),n=e.closest("["+i.attr_name()+"]"),s=n.find("section, .top-bar-section"),o=(e.next(".dropdown").outerHeight(),e.closest("li"));n.data("index",n.data("index")+1),o.addClass("moved"),i.rtl?(s.css({right:-(100*n.data("index"))+"%"}),s.find(">.name").css({right:100*n.data("index")+"%"})):(s.css({left:-(100*n.data("index"))+"%"}),s.find(">.name").css({left:100*n.data("index")+"%"})),n.css("height",e.siblings("ul").outerHeight(!0)+n.data("height"))}}),a(e).off(".topbar").on("resize.fndtn.topbar",i.throttle(function(){i.resize.call(i)},50)).trigger("resize.fndtn.topbar").load(function(){a(this).trigger("resize.fndtn.topbar")}),a("body").off(".topbar").on("click.fndtn.topbar",function(t){var e=a(t.target).closest("li").closest("li.hover");e.length>0||a("["+i.attr_name()+"] li.hover").removeClass("hover")}),a(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(t){t.preventDefault();var e=a(this),n=e.closest("["+i.attr_name()+"]"),s=n.find("section, .top-bar-section"),o=(n.data(i.attr_name(!0)+"-init"),e.closest("li.moved")),r=o.parent();n.data("index",n.data("index")-1),i.rtl?(s.css({right:-(100*n.data("index"))+"%"}),s.find(">.name").css({right:100*n.data("index")+"%"})):(s.css({left:-(100*n.data("index"))+"%"}),s.find(">.name").css({left:100*n.data("index")+"%"})),0===n.data("index")?n.css("height",""):n.css("height",r.outerHeight(!0)+n.data("height")),setTimeout(function(){o.removeClass("moved")},300)}),a(this.scope).find(".dropdown a").focus(function(){t(this).parents(".has-dropdown").addClass("hover")}).blur(function(){t(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var t=this;t.S("["+this.attr_name()+"]").each(function(){var e,i=t.S(this),a=i.data(t.attr_name(!0)+"-init"),s=i.parent("."+t.settings.sticky_class);if(!t.breakpoint()){var o=i.hasClass("expanded");i.css("height","").removeClass("expanded").find("li").removeClass("hover"),o&&t.toggle(i)}t.is_sticky(i,s,a)&&(s.hasClass("fixed")?(s.removeClass("fixed"),e=s.offset().top,t.S(n.body).hasClass("f-topbar-fixed")&&(e-=i.data("height")),i.data("stickyoffset",e),s.addClass("fixed")):(e=s.offset().top,i.data("stickyoffset",e)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(e){var n=this,i=e.data(this.attr_name(!0)+"-init"),a=n.S("section, .top-bar-section",e);a.detach(),n.S(".has-dropdown>a",a).each(function(){var e,a=n.S(this),s=a.siblings(".dropdown"),o=a.attr("href");s.find(".title.back").length||(e=t(1==i.mobile_show_parent_link&&o?'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link hide-for-medium-up"><a class="parent-link js-generated" href="'+o+'">'+a.html()+"</a></li>":'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>'),1==i.custom_back_text?t("h5>a",e).html(i.back_text):t("h5>a",e).html("&laquo; "+a.html()),s.prepend(e))}),a.appendTo(e),this.sticky(),this.assembled(e)},assembled:function(e){e.data(this.attr_name(!0),t.extend({},e.data(this.attr_name(!0)),{assembled:!0}))},height:function(e){var n=0,i=this;return t("> li",e).each(function(){n+=i.S(this).outerHeight(!0)}),n},sticky:function(){var t=this;this.S(e).on("scroll",function(){t.update_sticky_positioning()})},update_sticky_positioning:function(){var t="."+this.settings.sticky_class,n=this.S(e),i=this;if(i.settings.sticky_topbar&&i.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var a=this.settings.sticky_topbar.data("stickyoffset")+this.settings.start_offset;i.S(t).hasClass("expanded")||(n.scrollTop()>a?i.S(t).hasClass("fixed")||(i.S(t).addClass("fixed"),i.S("body").addClass("f-topbar-fixed")):n.scrollTop()<=a&&i.S(t).hasClass("fixed")&&(i.S(t).removeClass("fixed"),i.S("body").removeClass("f-topbar-fixed")))}},off:function(){this.S(this.scope).off(".fndtn.topbar"),this.S(e).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,window,window.document),function(t,e,n,i){"use strict";function a(t){var e=/fade/i.test(t),n=/pop/i.test(t);return{animate:e||n,pop:n,fade:e}}var s=[];Foundation.libs.reveal={name:"reveal",version:"5.5.3",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},on_ajax_error:t.noop,bg:t(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,n,i){t.extend(!0,this.settings,n,i),this.bindings(n,i)},events:function(t){var e=this,i=e.S;return i(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(t){if(t.preventDefault(),!e.locked){var n=i(this),a=n.data(e.data_attr("reveal-ajax")),s=n.data(e.data_attr("reveal-replace-content"));if(e.locked=!0,"undefined"==typeof a)e.open.call(e,n);else{var o=a===!0?n.attr("href"):a;e.open.call(e,n,{url:o},{replaceContentSel:s})}}}),i(n).on("click.fndtn.reveal",this.close_targets(),function(t){if(t.preventDefault(),!e.locked){var n=i("["+e.attr_name()+"].open").data(e.attr_name(!0)+"-init")||e.settings,a=i(t.target)[0]===i("."+n.bg_class)[0];if(a){if(!n.close_on_background_click)return;t.stopPropagation()}e.locked=!0,e.close.call(e,a?i("["+e.attr_name()+"].open:not(.toback)"):i(this).closest("["+e.attr_name()+"]"))}}),i("["+e.attr_name()+"]",this.scope).length>0?i(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):i(this.scope).on("open.fndtn.reveal","["+e.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+e.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+e.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+e.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+e.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+e.attr_name()+"]",this.close_video),!0},key_up_on:function(t){var e=this;return e.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(t){var n=e.S("["+e.attr_name()+"].open"),i=n.data(e.attr_name(!0)+"-init")||e.settings;i&&27===t.which&&i.close_on_esc&&!e.locked&&e.close.call(e,n)}),!0},key_up_off:function(t){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(n,a){var o,r=this;n?"undefined"!=typeof n.selector?o=r.S("#"+n.data(r.data_attr("reveal-id"))).first():(o=r.S(this.scope),a=n):o=r.S(this.scope);var l=o.data(r.attr_name(!0)+"-init");if(l=l||this.settings,o.hasClass("open")&&n!==i&&n.attr("data-reveal-id")==o.attr("id"))return r.close(o);if(!o.hasClass("open")){var c=r.S("["+r.attr_name()+"].open");"undefined"==typeof o.data("css-top")&&o.data("css-top",parseInt(o.css("top"),10)).data("offset",this.cache_offset(o)),o.attr("tabindex","0").attr("aria-hidden","false"),this.key_up_on(o),o.on("open.fndtn.reveal",function(t){"fndtn.reveal"!==t.namespace}),o.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),c.length<1&&this.toggle_bg(o,!0),"string"==typeof a&&(a={url:a});var d=function(){c.length>0&&(l.multiple_opened?r.to_back(c):r.hide(c,l.css.close)),l.multiple_opened&&s.push(o),r.show(o,l.css.open)};if("undefined"!=typeof a&&a.url){var h="undefined"!=typeof a.success?a.success:null;t.extend(a,{success:function(e,n,i){if(t.isFunction(h)){var a=h(e,n,i);"string"==typeof a&&(e=a)}"undefined"!=typeof options&&"undefined"!=typeof options.replaceContentSel?o.find(options.replaceContentSel).html(e):o.html(e),r.S(o).foundation("section","reflow"),r.S(o).children().foundation(),d()}}),l.on_ajax_error!==t.noop&&t.extend(a,{error:l.on_ajax_error}),t.ajax(a)}else d()}r.S(e).trigger("resize")},close:function(e){var e=e&&e.length?e:this.S(this.scope),n=this.S("["+this.attr_name()+"].open"),i=e.data(this.attr_name(!0)+"-init")||this.settings,a=this;if(n.length>0)if(e.removeAttr("tabindex","0").attr("aria-hidden","true"),this.locked=!0,this.key_up_off(e),e.trigger("close.fndtn.reveal"),(i.multiple_opened&&1===n.length||!i.multiple_opened||e.length>1)&&(a.toggle_bg(e,!1),a.to_front(e)),i.multiple_opened){var o=e.is(":not(.toback)");a.hide(e,i.css.close,i),o?s.pop():s=t.grep(s,function(t){var n=t[0]===e[0];return n&&a.to_front(e),!n}),s.length>0&&a.to_front(s[s.length-1])}else a.hide(n,i.css.close,i)},close_targets:function(){var t="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?t+", ."+this.settings.bg_class:t},toggle_bg:function(e,n){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=t("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var a=this.settings.bg.filter(":visible").length>0;n!=a&&((n==i?a:!n)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(n,i){if(i){var s=n.data(this.attr_name(!0)+"-init")||this.settings,o=s.root_element,r=this;if(0===n.parent(o).length){var l=n.wrap('<div style="display: none;" />').parent();n.on("closed.fndtn.reveal.wrapped",function(){n.detach().appendTo(l),n.unwrap().unbind("closed.fndtn.reveal.wrapped")}),n.detach().appendTo(o)}var c=a(s.animation);if(c.animate||(this.locked=!1),c.pop){i.top=t(e).scrollTop()-n.data("offset")+"px";var d={top:t(e).scrollTop()+n.data("css-top")+"px",opacity:1};return setTimeout(function(){return n.css(i).animate(d,s.animation_speed,"linear",function(){r.locked=!1,n.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}if(i.top=t(e).scrollTop()+n.data("css-top")+"px",c.fade){var d={opacity:1};return setTimeout(function(){return n.css(i).animate(d,s.animation_speed,"linear",function(){r.locked=!1,n.trigger("opened.fndtn.reveal")}).addClass("open")},s.animation_speed/2)}return n.css(i).show().css({opacity:1}).addClass("open").trigger("opened.fndtn.reveal")}var s=this.settings;return a(s.animation).fade?n.fadeIn(s.animation_speed/2):(this.locked=!1,n.show())},to_back:function(t){t.addClass("toback")},to_front:function(t){t.removeClass("toback")},hide:function(n,i){if(i){var s=n.data(this.attr_name(!0)+"-init"),o=this;s=s||this.settings;var r=a(s.animation);if(r.animate||(this.locked=!1),r.pop){var l={top:-t(e).scrollTop()-n.data("offset")+"px",opacity:0};return setTimeout(function(){return n.animate(l,s.animation_speed,"linear",function(){o.locked=!1,n.css(i).trigger("closed.fndtn.reveal")}).removeClass("open")},s.animation_speed/2)}if(r.fade){var l={opacity:0};return setTimeout(function(){return n.animate(l,s.animation_speed,"linear",function(){o.locked=!1,n.css(i).trigger("closed.fndtn.reveal")}).removeClass("open")},s.animation_speed/2)}return n.hide().css(i).removeClass("open").trigger("closed.fndtn.reveal")}var s=this.settings;return a(s.animation).fade?n.fadeOut(s.animation_speed/2):n.hide()},close_video:function(e){var n=t(".flex-video",e.target),i=t("iframe",n);i.length>0&&(i.attr("data-src",i[0].src),i.attr("src",i.attr("src")),n.hide())},open_video:function(e){var n=t(".flex-video",e.target),a=n.find("iframe");if(a.length>0){var s=a.attr("data-src");if("string"==typeof s)a[0].src=a.attr("data-src");else{var o=a[0].src;a[0].src=i,a[0].src=o}n.show()}},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},cache_offset:function(t){var e=t.show().height()+parseInt(t.css("top"),10)+t.scrollY;return t.hide(),e},off:function(){t(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),function(t){"use strict";var e={init:function(n){return this.each(function(){this.self=t(this),e.destroy.call(this.self),this.opt=t.extend(!0,{},t.fn.raty.defaults,n),e._adjustCallback.call(this),e._adjustNumber.call(this),e._adjustHints.call(this),this.opt.score=e._adjustedScore.call(this,this.opt.score),"img"!==this.opt.starType&&e._adjustStarType.call(this),e._adjustPath.call(this),e._createStars.call(this),this.opt.cancel&&e._createCancel.call(this),this.opt.precision&&e._adjustPrecision.call(this),e._createScore.call(this),e._apply.call(this,this.opt.score),e._setTitle.call(this,this.opt.score),e._target.call(this,this.opt.score),this.opt.readOnly?e._lock.call(this):(this.style.cursor="pointer",e._binds.call(this))})},_adjustCallback:function(){for(var t=["number","readOnly","score","scoreName","target"],e=0;e<t.length;e++)"function"==typeof this.opt[t[e]]&&(this.opt[t[e]]=this.opt[t[e]].call(this))},_adjustedScore:function(t){return t?e._between(t,0,this.opt.number):t},_adjustHints:function(){if(this.opt.hints||(this.opt.hints=[]),this.opt.halfShow||this.opt.half)for(var t=this.opt.precision?10:2,e=0;e<this.opt.number;e++){var n=this.opt.hints[e];"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),this.opt.hints[e]=[];for(var i=0;t>i;i++){var a=n[i],s=n[n.length-1];void 0===s&&(s=null),this.opt.hints[e][i]=void 0===a?s:a}}},_adjustNumber:function(){this.opt.number=e._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var t=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var e=0;e<t.length;e++)this.opt[t[e]]=this.opt[t[e]].replace(".","-")},_apply:function(t){e._fill.call(this,t),t&&(t>0&&this.score.val(t),e._roundStars.call(this,t))},_between:function(t,e,n){return Math.min(Math.max(parseFloat(t),e),n)},_binds:function(){this.cancel&&(e._bindOverCancel.call(this),e._bindClickCancel.call(this),e._bindOutCancel.call(this)),e._bindOver.call(this),e._bindClick.call(this),e._bindOut.call(this)},_bindClick:function(){var n=this;n.stars.on("click.raty",function(i){var a=!0,s=n.opt.half||n.opt.precision?n.self.data("score"):this.alt||t(this).data("alt");n.opt.click&&(a=n.opt.click.call(n,+s,i)),(a||void 0===a)&&(n.opt.half&&!n.opt.precision&&(s=e._roundHalfScore.call(n,s)),e._apply.call(n,s))})},_bindClickCancel:function(){var t=this;t.cancel.on("click.raty",function(e){t.score.removeAttr("value"),t.opt.click&&t.opt.click.call(t,null,e)})},_bindOut:function(){var t=this;t.self.on("mouseleave.raty",function(n){var i=+t.score.val()||void 0;e._apply.call(t,i),e._target.call(t,i,n),e._resetTitle.call(t),t.opt.mouseout&&t.opt.mouseout.call(t,i,n);
})},_bindOutCancel:function(){var t=this;t.cancel.on("mouseleave.raty",function(n){var i=t.opt.cancelOff;if("img"!==t.opt.starType&&(i=t.opt.cancelClass+" "+i),e._setIcon.call(t,this,i),t.opt.mouseout){var a=+t.score.val()||void 0;t.opt.mouseout.call(t,a,n)}})},_bindOver:function(){var t=this,n=t.opt.half?"mousemove.raty":"mouseover.raty";t.stars.on(n,function(n){var i=e._getScoreByPosition.call(t,n,this);e._fill.call(t,i),t.opt.half&&(e._roundStars.call(t,i,n),e._setTitle.call(t,i,n),t.self.data("score",i)),e._target.call(t,i,n),t.opt.mouseover&&t.opt.mouseover.call(t,i,n)})},_bindOverCancel:function(){var t=this;t.cancel.on("mouseover.raty",function(n){var i=t.opt.path+t.opt.starOff,a=t.opt.cancelOn;"img"===t.opt.starType?t.stars.attr("src",i):(a=t.opt.cancelClass+" "+a,t.stars.attr("class",i)),e._setIcon.call(t,this,a),e._target.call(t,null,n),t.opt.mouseover&&t.opt.mouseover.call(t,null)})},_buildScoreField:function(){return t("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var e=this.opt.path+this.opt.cancelOff,n=t("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?n.attr({src:e,alt:"x"}):n.attr("data-alt","x").addClass(e),"left"===this.opt.cancelPlace?this.self.prepend("&#160;").prepend(n):this.self.append("&#160;").append(n),this.cancel=n},_createScore:function(){var n=t(this.opt.targetScore);this.score=n.length?n:e._buildScoreField.call(this)},_createStars:function(){for(var n=1;n<=this.opt.number;n++){var i=e._nameForIndex.call(this,n),a={alt:n,src:this.opt.path+this.opt[i]};"img"!==this.opt.starType&&(a={"data-alt":n,"class":a.src}),a.title=e._getHint.call(this,n),t("<"+this.opt.starType+" />",a).appendTo(this),this.opt.space&&this.self.append(n<this.opt.number?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(e){t(this).text(e),t.error(e)},_fill:function(t){for(var n=0,i=1;i<=this.stars.length;i++){var a,s=this.stars[i-1],o=e._turnOn.call(this,i,t);if(this.opt.iconRange&&this.opt.iconRange.length>n){var r=this.opt.iconRange[n];a=e._getRangeIcon.call(this,r,o),i<=r.range&&e._setIcon.call(this,s,a),i===r.range&&n++}else a=this.opt[o?"starOn":"starOff"],e._setIcon.call(this,s,a)}},_getFirstDecimal:function(t){var e=t.toString().split(".")[1],n=0;return e&&(n=parseInt(e.charAt(0),10),"9999"===e.slice(1,5)&&n++),n},_getRangeIcon:function(t,e){return e?t.on||this.opt.starOn:t.off||this.opt.starOff},_getScoreByPosition:function(n,i){var a=parseInt(i.alt||i.getAttribute("data-alt"),10);if(this.opt.half){var s=e._getWidth.call(this),o=parseFloat((n.pageX-t(i).offset().left)/s);a=a-1+o}return a},_getHint:function(t,n){if(0!==t&&!t)return this.opt.noRatedMsg;var i=e._getFirstDecimal.call(this,t),a=Math.ceil(t),s=this.opt.hints[(a||1)-1],o=s,r=!n||this.move;return this.opt.precision?(r&&(i=0===i?9:i-1),o=s[i]):(this.opt.halfShow||this.opt.half)&&(i=r&&0===i?1:i>5?1:0,o=s[i]),""===o?"":o||t},_getWidth:function(){var t=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));return t||e._error.call(this,"Could not get the icon width!"),t},_lock:function(){var t=e._getHint.call(this,this.score.val());this.style.cursor="",this.title=t,this.score.prop("readonly",!0),this.stars.prop("title",t),this.cancel&&this.cancel.hide(),this.self.data("readonly",!0)},_nameForIndex:function(t){return this.opt.score&&this.opt.score>=t?"starOn":"starOff"},_resetTitle:function(t){for(var n=0;n<this.opt.number;n++)this.stars[n].title=e._getHint.call(this,n+1)},_roundHalfScore:function(t){var n=parseInt(t,10),i=e._getFirstDecimal.call(this,t);return 0!==i&&(i=i>5?1:.5),n+i},_roundStars:function(t,n){var i,a=(t%1).toFixed(2);if(n||this.move?i=a>.5?"starOn":"starHalf":a>this.opt.round.down&&(i="starOn",this.opt.halfShow&&a<this.opt.round.up?i="starHalf":a<this.opt.round.full&&(i="starOff")),i){var s=this.opt[i],o=this.stars[Math.ceil(t)-1];e._setIcon.call(this,o,s)}},_setIcon:function(t,e){t["img"===this.opt.starType?"src":"className"]=this.opt.path+e},_setTarget:function(t,e){e&&(e=this.opt.targetFormat.toString().replace("{score}",e)),t.is(":input")?t.val(e):t.html(e)},_setTitle:function(t,n){if(t){var i=parseInt(Math.ceil(t),10),a=this.stars[i-1];a.title=e._getHint.call(this,t,n)}},_target:function(n,i){if(this.opt.target){var a=t(this.opt.target);a.length||e._error.call(this,"Target selector invalid or missing!");var s=i&&"mouseover"===i.type;if(void 0===n)n=this.opt.targetText;else if(null===n)n=s?this.opt.cancelHint:this.opt.targetText;else{"hint"===this.opt.targetType?n=e._getHint.call(this,n,i):this.opt.precision&&(n=parseFloat(n).toFixed(1));var o=i&&"mousemove"===i.type;s||o||this.opt.targetKeep||(n=this.opt.targetText)}e._setTarget.call(this,a,n)}},_turnOn:function(t,e){return this.opt.single?t===e:e>=t},_unlock:function(){this.style.cursor="pointer",this.removeAttribute("title"),this.score.removeAttr("readonly"),this.self.data("readonly",!1);for(var t=0;t<this.opt.number;t++)this.stars[t].title=e._getHint.call(this,t+1);this.cancel&&this.cancel.css("display","")},cancel:function(n){return this.each(function(){var i=t(this);i.data("readonly")!==!0&&(e[n?"click":"score"].call(i,null),this.score.removeAttr("value"))})},click:function(n){return this.each(function(){t(this).data("readonly")!==!0&&(n=e._adjustedScore.call(this,n),e._apply.call(this,n),this.opt.click&&this.opt.click.call(this,n,t.Event("click")),e._target.call(this,n))})},destroy:function(){return this.each(function(){var e=t(this),n=e.data("raw");n?e.off(".raty").empty().css({cursor:n.style.cursor}).removeData("readonly"):e.data("raw",e.clone()[0])})},getScore:function(){var t,e=[];return this.each(function(){t=this.score.val(),e.push(t?+t:void 0)}),e.length>1?e:e[0]},move:function(n){return this.each(function(){var i=parseInt(n,10),a=e._getFirstDecimal.call(this,n);i>=this.opt.number&&(i=this.opt.number-1,a=10);var s=e._getWidth.call(this),o=s/10,r=t(this.stars[i]),l=r.offset().left+o*a,c=t.Event("mousemove",{pageX:l});this.move=!0,r.trigger(c),this.move=!1})},readOnly:function(n){return this.each(function(){var i=t(this);i.data("readonly")!==n&&(n?(i.off(".raty").children("img").off(".raty"),e._lock.call(this)):(e._binds.call(this),e._unlock.call(this)),i.data("readonly",n))})},reload:function(){return e.set.call(this,{})},score:function(){var n=t(this);return arguments.length?e.setScore.apply(n,arguments):e.getScore.call(n)},set:function(e){return this.each(function(){t(this).raty(t.extend({},this.opt,e))})},setScore:function(n){return this.each(function(){t(this).data("readonly")!==!0&&(n=e._adjustedScore.call(this,n),e._apply.call(this,n),e._target.call(this,n))})}};t.fn.raty=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist!"):e.init.apply(this,arguments)},t.fn.raty.defaults={cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:void 0,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",starType:"img",target:void 0,targetFormat:"{score}",targetKeep:!1,targetScore:void 0,targetText:"",targetType:"hint"}}(jQuery),function(t){t(document).ready(function(){var e=function(){var e={path:"/img/raty/images",half:!0,starType:"i",hints:["","","","",""]};t(".raty").each(function(){var n=t(this);n.raty(t.extend(e,n.data()))})},n=function(){t('.reveal-modal[aria-hidden="false"]').foundation("reveal","open");var e=null;t("body").on("click","a[data-popin]",function(){return e&&(e.is(":visible")&&e.hide(),e.detach()),t(this).hasClass("unavailable")||t.ajax({url:this.href,headers:{"KGC-Ajax-Block":!0},complete:function(n){t("body").append(n.responseText),e=t(".reveal-modal"),e.foundation("reveal","open")}}),!1})},i=function(){t("body").on("submit",".js-ajax-form form",function(){var e=t(this);return t.ajax({url:this.action,method:"POST",headers:{"KGC-Ajax-Block":"content"},data:e.serialize(),complete:function(t){t.responseJSON&&t.responseJSON.redirect?document.location.href=t.responseJSON.redirect:void 0!==e.attr("data-ajax-login")?e.replaceWith(t.responseText):e.closest(".popin_content").replaceWith(t.responseText)}}),!1}),t("body").on("click",".reveal-modal.register h3:not(.active)",function(){t(this).addClass("active").siblings("h3.active").removeClass("active")})};e(),n(),i()})}(jQuery);var _={handlingNumberValue:function(t){return"string"!=typeof t&&"number"!=typeof t||isNaN(t)||""===t?0:parseFloat(t)},isUndefined:function(t,e){return t===e},getUndefined:function(t){return t}};DynamicForm.prototype.add=function(t){var e=this,n=$(e.container_id);if(0!=n.length){var i=e.wrapper_fabric_id+"-"+e.index,a='<div id="'+i+'" class="'+e.wrapper_fabric_class+'">'+e.element_prototype.replace(/__name__label__/g,e.index).replace(/__name__/g,e.index)+"</div>";n.append(a);var s=$("#"+i);return e.setLabel(s.children(e.children_selector).children("label")),"undefined"!=typeof t&&"object"!=typeof t?$("#"+i).find("input").val(t):"object"==typeof t&&$("#"+i).find("input").each(function(){for(var e in t){var n=new RegExp("\\["+e+"\\]$");n.test(this.name)&&("checkbox"==this.type||"radio"==this.type?this.checked=t[e]:this.value=t[e])}}),e.index+=1,i}},DynamicForm.prototype.addCollection=function(t){for(var e=0,n=t.length;n>e;e++)this.add(t[e])},DynamicForm.prototype.remove=function(t){var e=$("#"+t);e.length>0&&e.remove()},DynamicForm.prototype.removeAll=function(){$(this.container_id+" ."+this.wrapper_fabric_class).remove(),this.index=0},DynamicForm.prototype.setLabel=function(t){var e=this,n=e.handlingNumberValue(t.html()),i=e.wrapper_fabric_id+"_element_num-"+n;t.html('<span id="'+i+'">'+e.translation.element_num+(e.append_label_index?" "+(n+1):"")+" </span>"),e.assignRemoveButton($("#"+i))},DynamicForm.prototype.assignRemoveButton=function(t){if(t.length>0){var e=this,n=e.getNumberId(t),i=$('<button type="button" class="btn remove_element" data-target="'+e.wrapper_fabric_id+"-"+n+'">'+e.remove_element_content+"</button>");i.click(function(t){var n=$(this);"button"!=n.get(0).tagName.toLowerCase()&&(n=n.parent("button")),e.remove(n.data("target"))}),t.append(i)}},DynamicForm.prototype.getNumberId=function(t,e){var n="";if("string"==typeof t)n=t;else{var i="undefined"!=typeof e?e:"id";n=t.attr(i)}return RegExp("-","").exec(n),this.handlingNumberValue(RegExp.rightContext)},DynamicForm.prototype.handlingNumberValue=function(t){return"string"!=typeof t&&"number"!=typeof t||isNaN(t)||""===t?0:parseFloat(t)},function(t){t(document).ready(function(){var e=function(){t(document).foundation()},n=function(){t(".psychics__item .psychic__button--status").on("availability:change",function(){var e=t(this),n=e.hasClass("available");e.closest(".psychics__item").find(".psychic__button--chat")[n?"removeClass":"addClass"]("unavailable")}).trigger("availability:change"),t(".psychic__button--status").click(function(){return!t(this).hasClass("unavailable")})},i=function(){t("body.homepage").on("close.fndtn.reveal","[data-reveal]",function(){document.location.href=document.location.href.replace(/(https:\/\/[^\/]+\/(?:app_dev.php\/)?[^\/]+)\/.*/,"$1/voyants/")})};e(),n(),i()})}(jQuery);